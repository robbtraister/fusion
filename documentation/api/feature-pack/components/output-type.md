# Output Type API

Output Types are used to define the HTML wrapping that is applied to server responses (think `head`, `title`, `meta`, `link`, `script` tags, etc). Anything that is part of the server generated HTML, but is not specific to a page/template should be defined in an output type.

When rendering a page, the `outputType` query parameter will be used to determine which output type is used to handle the request; if no parameter is specified, `default` will be used.

## Implementation

##### Naming

An Output Type is expected to be stored and named in the following format:

- `/src/components/output-types/{outputTypeName}.(js|jsx)`

> This will build an Output Type component where the `{outputTypeName}` portion of the filepath represents the name of the Output Type.

##### Example

```jsx
/*    /src/components/output-types/default.jsx    */

import React from 'react'

export default (props) => {
  return (
    <html>
      <head>
        <title>{props.metaValue('title') || 'Default Title'}</title>
        <props.MetaTags />
        <props.Libs />
        <props.CssLinks />
        <link rel='icon' type='image/x-icon' href={`${props.contextPath}/resources/img/favicon.ico`} />
      </head>
      <body>
        <h1>Welcome to Fusion!</h1>
        <div id='fusion-app'>
          {props.children}
        </div>
        <props.Fusion />
      </body>
    </html>
  )
}
```

-----

## Props

### `children` - *Array*

##### Description

React uses the convention of a prop named `children` to define content that should be inserted inside your component. We respect this convention for output types. In this case, the `children` prop defines the rendered content of the page. If you want to perform client-side-only rendering, do not include this property in your page ([example](../../engine/bundle/components/output-types/spa.jsx)).

##### Example

-----

### `contextPath` - *Type*

##### Description

The context path where the app is running. Should be used to prefix resource references. Default is `/pb`.

##### Example

-----

### `cssLinks()`

##### Description

Include the reference links for the appropriate page/template and/or output-type. Will insert a link reference tag. In the case of page/template, the file name will be content hashed to the specific state of the page or template.

##### Parameters

##### Return

##### Example

-----

### `fusion()`

##### Description

Include a special script block that includes fusion-specific values, as well as the server-fetched content cache that is used during client-side refresh to prevent content flashing.

Content refresh may be specifically disabled. This only applies to content that was previously fetched server-side and is available in the content cache; any content that is not in the cache will be fetched from the client, regardless. This feature is generally only useful in the case of prerendered HTML. On-demand HTML is already aware that its content is fresh and will not attempt client-side fetching.

##### Parameters

##### Return

##### Example

-----

### `libs()`

##### Description

Include the scripts necessary to perform client-side re-render and content refresh. This includes both a shared react script and a specific page/template script.

##### Parameters

##### Return

##### Example

-----

### `metaTag()`

##### Description

This prop will insert meta tags into your rendered HTML. If name is provided, it will insert the single meta tag specified. If no name is given, it will insert all meta tags that are enabled in the admin.

##### Parameters

##### Return

##### Example

-----

### `metaValue()`

##### Description

Similar to `metaTag` above, but returns only the value, not a fully rendered HTML meta tag.

##### Parameters

##### Return

##### Example

-----

### `renderables` - *Type*

##### Description

A flattened array of all component elements from `tree`. Suitable for direct access with `.find`, `.filter`, or `.map`.

##### Example

-----

### `styles()`

##### Description

Include the generated css for the appropriate page/template and/or output-type. Will insert the computed inlined styles appropriate to the rendering. For a reference link, see `cssLinks` below.

##### Parameters

##### Return

##### Example

-----

### `tree` - *Type*

##### Description

A JSON map that represents the full component tree of the page to be rendered.

##### Example

-----

### `version` - *Type*

##### Description

The deployment version (of the lambda function) that is generating this response. Should be added as a query param to static urls as `?v=${version}`. Any urls generated by fusion (e.g., via cssLinks) will already be annotated with this param.

##### Example

-----

## Instance Methods

### `displayProps()`

##### Description

##### Parameters

##### Return

##### Example
