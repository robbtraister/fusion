# Output Types

Output Types are used to define the HTML wrapping that is applied to server responses (think `head`, `title`, `meta`, `link`, `script` tags, etc). Anything that is part of the server generated HTML, but is not specific to a page/template should be defined in an output type.

When rendering a page, the `outputType` query parameter will be used to determine which output type is used to handle the request; if no parameter is specified, `default` will be used.

## Children

-   `children`

React uses the convention of a prop named `children` to define content that should be inserted inside your component. We respect this convention for output types. In this case, the `children` prop defines the rendered content of the page. If you want to perform client-side-only rendering, do not include this property in your page ([example](../../engine/bundle/components/output-types/spa.jsx)).

## Properties

Output Types are defined as React components, just like features and chains. However, they are provided a different set of properties (see [here](./components.md) for feature/chain properties).

Each of the following properties are provided as functions that accept further customization (they can also be referenced directly without being called, which will call the function with the default values).

-   `contextPath`

The context path where the app is running. Should be used to prefix resource references. Default is `/pb`.

-   `metaValue(name, [defaultValue])`

A function that returns the value of the named meta tag.

-   `renderables`

A flattened array of all component elements from `tree` (see below). Suitable for direct access with `.find`, `.filter`, or `.map`.

-   `tree`

A JSON map that represents the full component tree of the page to be rendered.

-   `deployment` (aliased as `version`)

a function that accepts a url and returns a modified url that ensures a request is handled by the appropriate deployment by specifying the deployment version (of the lambda function) as a query parameter. May also be added manually as a query param to static urls as `?v=${deployment}`. Any urls generated by fusion (e.g., via CssLinks) will already be annotated with this param.

## Components

-   `<CssLinks />` (also aliased as `CssTags`)

Include the reference links for the appropriate page/template and/or output-type. Will insert a link reference tag. In the case of page/template, the file name will be content hashed to the specific state of the page or template. For inline styles, see `Styles` below.

Each of the following are equivalent and will insert up to two link tags (output-type link will be included if the output-type has styling; page/template link will always be included, even if empty, in order to support client-side updates).
```js
<props.CssLinks />
```

The following will provide access to the css reference hrefs for custom access.
```js
<props.CssLinks>
  {
    ({outputTypeHref, templateHref}) => <link rel='stylesheet' type='text/css' href={outputTypeHref} />
  }
</props.CssLinks>
```

_Note: customizing reference links is not recommended unless absolutely necessary. If inserting a custom link to the page/template styles, please be sure to include `id="fusion-template-styles"` since that id is used to update the styles in the case of a newly-published template._

-   `<Fusion />`

Include a special script block that includes fusion-specific values, as well as the server-fetched content cache that is used during client-side refresh to prevent content flashing.

Content refresh may be specifically disabled. This only applies to content that was previously fetched server-side and is available in the content cache; any content that is not in the cache will be fetched from the client, regardless. This feature is generally only useful in the case of prerendered HTML. On-demand HTML is already aware that its content is fresh and will not attempt client-side fetching.

```js
<props.Fusion />
```

-   `Libs`

Include the scripts necessary to perform client-side re-render and content refresh. This includes both a shared react script and a specific page/template script.

```js
<props.Libs />
```

-   `<MetaTag [name] [default] />`

This component will insert meta tags into your rendered HTML. If name is provided, it will insert the single meta tag specified. If no name is given, it will insert all meta tags that are enabled in the admin (also aliased as `MetaTags`).

The following are equivalent, and will insert multiple meta tags
```js
<props.MetaTag />
```
```js
<props.MetaTags />
```

To insert a single meta tag, the following are equivalent.
```js
<props.MetaTag name='title' />
```

You may also specify a default value, in case the meta value has not been set
```js
<props.MetaTag name='title' default='Default Title' />
```

-   `<Styles />`

Include the generated css for the appropriate page/template and/or output-type. Will insert the computed inlined styles appropriate to the rendering. For a reference link, see `CssLinks` above.

Each of the following are equivalent and will insert all inlined styles for the rendering (both output-type and page/template styles).
```js
<props.Styles />
```

The following will provide access to the computed styles for custom access, using the render prop pattern.
```js
<props.Styles>
  {
    ({outputTypeStyles, templateStyles}) => <style amp-custom='true'>{outputTypeStyles}</style>
  }
</props.Styles>
```
